{% extends 'base.html' %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h1>
    
    {% if query %}
        <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "<strong>{{ query }}</strong>" –Ω–∞–π–¥–µ–Ω–æ:</p>
        
        <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
        {% if results.news %}
            <h3 class="mt-4">üì∞ –ù–æ–≤–æ—Å—Ç–∏ ({{ results.news.count }})</h3>
            <div class="list-group mb-4">
                {% for item in results.news %}
                    <a href="{% url 'news_detail' item.slug %}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">{{ item.title }}</h5>
                            <small>{{ item.created_at|date:"d.m.Y" }}</small>
                        </div>
                        <p class="mb-1">{{ item.content|truncatewords:30 }}</p>
                        <small>{{ item.get_category_display }}</small>
                    </a>
                {% endfor %}
            </div>
        {% endif %}
        
        <!-- –ö—É—Ä—Å—ã -->
        {% if results.courses %}
            <h3 class="mt-4">üéì –ö—É—Ä—Å—ã ({{ results.courses.count }})</h3>
            <div class="row mb-4">
                {% for course in results.courses %}
                    <div class="col-md-6 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">{{ course.title }}</h5>
                                <p class="card-text">{{ course.description|truncatewords:30 }}</p>
                                <a href="{% url 'course_detail' course.slug %}" class="btn btn-primary btn-sm">–ü–µ—Ä–µ–π—Ç–∏</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
        {% if results.materials %}
            <h3 class="mt-4">üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã ({{ results.materials.count }})</h3>
            <div class="list-group mb-4">
                {% for material in results.materials %}
                    <div class="list-group-item">
                        <h5>{{ material.title }}</h5>
                        <p>–ö—É—Ä—Å: <a href="{% url 'course_detail' material.course.slug %}">{{ material.course.title }}</a></p>
                        <small>–¢–∏–ø: {{ material.get_material_type_display }}</small>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        <!-- –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ -->
        {% if not results.news and not results.courses and not results.materials %}
            <div class="alert alert-warning mt-4">
                –ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
            </div>
        {% endif %}
        
    {% else %}
        <div class="alert alert-info">
            –í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞.
        </div>
    {% endif %}
    
    <div class="mt-4">
        <a href="{% url 'home' %}" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>
{% endblock %}