{% extends 'base.html' %}
{% block content %}
<h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
<div class="row">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body text-center">
                {% if user.avatar %}
                    <img src="{{ user.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="user-avatar mb-3">
                {% endif %}
                <h4>{{ user.get_full_name|default:user.username }}</h4>
                <p class="text-muted">{{ user.get_role_display }}</p>
                <p><i class="fas fa-envelope"></i> {{ user.email }}</p>
                {% if user.is_student %}
                    <p><i class="fas fa-users"></i> –ì—Ä—É–ø–ø–∞: {{ user.course_group|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>
                {% elif user.is_teacher %}
                    <p><i class="fas fa-university"></i> –ö–∞—Ñ–µ–¥—Ä–∞: {{ user.department|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>
                {% endif %}
                <a href="{% url 'profile' %}" class="btn btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h4>–ú–æ–∏ –∫—É—Ä—Å—ã</h4>
                {% if user.is_student %}
                    <ul>
                        {% for course in user.enrolled_courses.all %}
                            <li><a href="{% url 'course_detail' course.slug %}">{{ course.title }}</a></li>
                        {% empty %}
                            <li>–í—ã –Ω–µ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –∫—É—Ä—Å.</li>
                        {% endfor %}
                    </ul>
                {% elif user.is_teacher %}
                    <ul>
                        {% for course in user.course_set.all %}
                            <li><a href="{% url 'course_detail' course.slug %}">{{ course.title }}</a></li>
                        {% empty %}
                            <li>–£ –≤–∞—Å –Ω–µ—Ç –∫—É—Ä—Å–æ–≤.</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<!-- –í–∏–¥–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
<div class="card mt-3">
    <div class="card-header">
        <h5>üìà –í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h5>
    </div>
    <div class="card-body">
        <div class="row text-center">
            <div class="col-md-3 mb-3">
                <div class="display-4 text-primary">{{ user.enrolled_courses.count }}</div>
                <small>–ö—É—Ä—Å–æ–≤</small>
            </div>
            <div class="col-md-3 mb-3">
                <div class="display-4 text-success">{{ completed_materials }}</div>
                <small>–ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</small>
            </div>
            <div class="col-md-3 mb-3">
                <div class="display-4 text-warning">{{ active_days }}</div>
                <small>–î–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</small>
            </div>
            <div class="col-md-3 mb-3">
                <div class="display-4 text-info">{{ last_login|timesince }}</div>
                <small>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</small>
            </div>
        </div>
    </div>
</div>
{% endblock %}